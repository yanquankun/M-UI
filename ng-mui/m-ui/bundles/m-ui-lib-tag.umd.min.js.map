{"version":3,"sources":["ng://m-ui-lib/tag/tag.component.ts","ng://m-ui-lib/tag/tag.module.ts"],"sourcesContent":["import { Component, Input, OnInit, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { dateFormat } from 'm-ui-lib/util';\n@Component({\n  selector: 'm-ui-tag',\n  templateUrl: './tag.component.html',\n  styleUrls: ['./tag.component.less']\n})\nexport class TagComponent implements OnInit {\n  // 是否启动自定义颜色\n  @Input() tagBgc: string = \"\";\n  // 是否可关闭\n  @Input() closeable: boolean = false;\n  // 是否打开点击tag标签开启庆祝效果\n  @Input() celebrate: boolean = false;\n  // 关闭事件\n  @Output() closeEvent: EventEmitter<{ val: string }> = new EventEmitter<{ val: string }>();\n  @ViewChild(\"content\") content: ElementRef<any>;\n  @ViewChild(\"tag\") tag: ElementRef<any>;\n  hideTag: boolean = false;\n  beforeBgc = \"#fafafa\";\n\n  constructor() { }\n\n  tagClick(e) {\n    const tag = this.tag.nativeElement;\n    if (this.celebrate) {\n      const particles = [];\n      const color = this.randomColor();\n\n      const particle = document.createElement('span');\n      particle.classList.add('particle', 'move');\n\n      // const { x, y } = this.randomLocation();\n      const { x, y } = { x: 50 + \"px\", y: -(e['clientY'] - 50) + \"px\" };\n      particle.style.setProperty('--x', x);\n      particle.style.setProperty('--y', y);\n      particle.style.background = color;\n\n      tag.appendChild(particle);\n\n      particles.push(particle);\n\n      setTimeout(() => {\n        for (let i = 0; i < 100; i++) {\n          const innerP = document.createElement('span');\n          innerP.classList.add('particle', 'move');\n          innerP.style.transform = `translate(${x}, ${y})`;\n\n          const xs = Math.random() * 200 - 100 + 'px';\n          const ys = Math.random() * 200 - 100 + 'px';\n          innerP.style.setProperty('--x', `calc(${x} + ${xs})`);\n          innerP.style.setProperty('--y', `calc(${y} + ${ys})`);\n          innerP.style.animationDuration = Math.random() * 300 + 200 + 'ms';\n          innerP.style.background = color;\n\n          tag.appendChild(innerP);\n          particles.push(innerP)\n        }\n\n        setTimeout(() => {\n          particles.forEach(particle => {\n            particle.remove();\n          })\n        }, 1000)\n      }, 1000);\n    }\n  }\n\n  randomLocation() {\n    return {\n      x: Math.random() * window.innerWidth - window.innerWidth / 2 + 'px',\n      y: Math.random() * window.innerHeight - window.innerHeight / 2 + 'px',\n    }\n  }\n\n  randomColor() {\n    return `hsl(${Math.floor(Math.random() * 361)}, 100%, 50%)`;\n  }\n\n  close() {\n    this.hideTag = true;\n    const val = this.content.nativeElement.outerText;\n    const output = {\n      val: val,\n    }\n    this.closeEvent.emit(output);\n  }\n\n  ngOnInit() {\n    const d = new dateFormat;\n    console.log(d.format(new Date().getTime(), \"date\", 13))\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TagComponent } from './tag.component';\n@NgModule({\n  declarations: [TagComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [TagComponent]\n})\nexport class TagModule { }\n"],"names":["TagComponent","prototype","tagClick","e","particles_1","color_1","particle","x_1","y_1","tag","this","nativeElement","celebrate","randomColor","document","createElement","classList","add","_a","x","y","style","setProperty","background","appendChild","push","setTimeout","i","innerP","transform","xs","Math","random","ys","animationDuration","forEach","remove","randomLocation","window","innerWidth","innerHeight","floor","close","hideTag","output","val","content","outerText","closeEvent","emit","ngOnInit","d","dateFormat","console","log","format","Date","getTime","Component","args","selector","template","Input","Output","ViewChild","tagBgc","closeable","EventEmitter","beforeBgc","NgModule","declarations","imports","CommonModule","exports","TagModule"],"mappings":"iaAAA,IAAAA,GAuBEA,EAAAC,UAAAC,SAAA,SAASC,G,IAGCC,EACAC,EAEAC,EAIEC,EAAGC,EATPC,EAAMC,KAAKD,IAAIE,cACjBD,KAAKE,YACDR,EAAY,GACZC,EAAQK,KAAKG,eAEbP,EAAWQ,SAASC,cAAc,SAC/BC,UAAUC,IAAI,WAAY,QAG7BC,EAAA,CAAAC,EAAA,OAAAC,IAAAjB,EAAA,QAAA,IAAA,MAAEI,EAAAW,EAAAC,EAAGX,EAAAU,EAAAE,EACXd,EAASe,MAAMC,YAAY,MAAOf,GAClCD,EAASe,MAAMC,YAAY,MAAOd,GAClCF,EAASe,MAAME,WAAalB,EAE5BI,EAAIe,YAAYlB,GAEhBF,EAAUqB,KAAKnB,GAEfoB,WAAU,WACR,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAKA,IAAK,C,IACtBC,EAASd,SAASC,cAAc,QACtCa,EAAOZ,UAAUC,IAAI,WAAY,QACjCW,EAAOP,MAAMQ,UAAY,aAAatB,EAAC,KAAKC,EAAC,I,IAEvCsB,EAAqB,IAAhBC,KAAKC,SAAiB,IAAM,KACjCC,EAAqB,IAAhBF,KAAKC,SAAiB,IAAM,KACvCJ,EAAOP,MAAMC,YAAY,MAAO,QAAQf,EAAC,MAAMuB,EAAE,KACjDF,EAAOP,MAAMC,YAAY,MAAO,QAAQd,EAAC,MAAMyB,EAAE,KACjDL,EAAOP,MAAMa,kBAAoC,IAAhBH,KAAKC,SAAiB,IAAM,KAC7DJ,EAAOP,MAAME,WAAalB,EAE1BI,EAAIe,YAAYI,GAChBxB,EAAUqB,KAAKG,GAGjBF,WAAU,WACRtB,EAAU+B,QAAO,SAAC7B,GAChBA,EAAS8B,YAEV,MACF,OAIPpC,EAAAC,UAAAoC,eAAA,WACE,MAAO,CACLlB,EAAGY,KAAKC,SAAWM,OAAOC,WAAaD,OAAOC,WAAa,EAAI,KAC/DnB,EAAGW,KAAKC,SAAWM,OAAOE,YAAcF,OAAOE,YAAc,EAAI,OAIrExC,EAAAC,UAAAY,YAAA,WACE,MAAO,OAAOkB,KAAKU,MAAsB,IAAhBV,KAAKC,UAAe,gBAG/ChC,EAAAC,UAAAyC,MAAA,WACEhC,KAAKiC,SAAU,E,IAETC,EAAS,CACbC,IAFUnC,KAAKoC,QAAQnC,cAAcoC,WAIvCrC,KAAKsC,WAAWC,KAAKL,IAGvB5C,EAAAC,UAAAiD,SAAA,W,IACQC,EAAI,IAAIC,EAAAA,WACdC,QAAQC,IAAIH,EAAEI,QAAO,IAAIC,MAAOC,UAAW,OAAQ,M,oBAxFtDC,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,WACVC,SAAA,6V,6iBAKCC,EAAAA,Q,iBAEAA,EAAAA,Q,iBAEAA,EAAAA,Q,kBAEAC,EAAAA,S,eACAC,EAAAA,UAASL,KAAA,CAAC,a,WACVK,EAAAA,UAASL,KAAA,CAAC,UA4Eb3D,GAxEE,SAAAA,IAZSU,KAAAuD,OAAiB,GAEjBvD,KAAAwD,WAAqB,EAErBxD,KAAAE,WAAqB,EAEpBF,KAAAsC,WAA4C,IAAImB,EAAAA,aAG1DzD,KAAAiC,SAAmB,EACnBjC,KAAA0D,UAAY,U,oBChBbC,EAAAA,SAAQV,KAAA,CAAC,CACRW,aAAc,CAACtE,GACfuE,QAAS,CACPC,EAAAA,cAEFC,QAAS,CAACzE,OARZ0E,EAUyBA,EAPzB,SAAAA,K"}