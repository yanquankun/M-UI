{"version":3,"file":"m-ui-lib-tag.umd.js.map","sources":["ng://m-ui-lib/tag/tag.component.ts","ng://m-ui-lib/tag/tag.module.ts"],"sourcesContent":["import { Component, Input, OnInit, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { dateFormat } from 'm-ui-lib/util';\n@Component({\n  selector: 'm-ui-tag',\n  templateUrl: './tag.component.html',\n  styleUrls: ['./tag.component.less']\n})\nexport class TagComponent implements OnInit {\n  // 是否启动自定义颜色\n  @Input() tagBgc: string = \"\";\n  // 是否可关闭\n  @Input() closeable: boolean = false;\n  // 是否打开点击tag标签开启庆祝效果\n  @Input() celebrate: boolean = false;\n  // 关闭事件\n  @Output() closeEvent: EventEmitter<{ val: string }> = new EventEmitter<{ val: string }>();\n  @ViewChild(\"content\") content: ElementRef<any>;\n  @ViewChild(\"tag\") tag: ElementRef<any>;\n  hideTag: boolean = false;\n  beforeBgc = \"#fafafa\";\n\n  constructor() { }\n\n  tagClick(e) {\n    const tag = this.tag.nativeElement;\n    if (this.celebrate) {\n      const particles = [];\n      const color = this.randomColor();\n\n      const particle = document.createElement('span');\n      particle.classList.add('particle', 'move');\n\n      // const { x, y } = this.randomLocation();\n      const { x, y } = { x: 50 + \"px\", y: -(e['clientY'] - 50) + \"px\" };\n      particle.style.setProperty('--x', x);\n      particle.style.setProperty('--y', y);\n      particle.style.background = color;\n\n      tag.appendChild(particle);\n\n      particles.push(particle);\n\n      setTimeout(() => {\n        for (let i = 0; i < 100; i++) {\n          const innerP = document.createElement('span');\n          innerP.classList.add('particle', 'move');\n          innerP.style.transform = `translate(${x}, ${y})`;\n\n          const xs = Math.random() * 200 - 100 + 'px';\n          const ys = Math.random() * 200 - 100 + 'px';\n          innerP.style.setProperty('--x', `calc(${x} + ${xs})`);\n          innerP.style.setProperty('--y', `calc(${y} + ${ys})`);\n          innerP.style.animationDuration = Math.random() * 300 + 200 + 'ms';\n          innerP.style.background = color;\n\n          tag.appendChild(innerP);\n          particles.push(innerP)\n        }\n\n        setTimeout(() => {\n          particles.forEach(particle => {\n            particle.remove();\n          })\n        }, 1000)\n      }, 1000);\n    }\n  }\n\n  randomLocation() {\n    return {\n      x: Math.random() * window.innerWidth - window.innerWidth / 2 + 'px',\n      y: Math.random() * window.innerHeight - window.innerHeight / 2 + 'px',\n    }\n  }\n\n  randomColor() {\n    return `hsl(${Math.floor(Math.random() * 361)}, 100%, 50%)`;\n  }\n\n  close() {\n    this.hideTag = true;\n    const val = this.content.nativeElement.outerText;\n    const output = {\n      val: val,\n    }\n    this.closeEvent.emit(output);\n  }\n\n  ngOnInit() {\n    const d = new dateFormat;\n    console.log(d.format(new Date().getTime(), \"date\", 13))\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TagComponent } from './tag.component';\n@NgModule({\n  declarations: [TagComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [TagComponent]\n})\nexport class TagModule { }\n"],"names":["EventEmitter","dateFormat","Component","Input","Output","ViewChild","NgModule","CommonModule"],"mappings":"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"}
