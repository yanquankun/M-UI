/**
 * @fileoverview added by tsickle
 * Generated from: date.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class until {
    /**
     * @param {?} m
     * @return {?}
     */
    add0(m) {
        return m < 10 ? "0" + m : m;
    }
}
export class dateFormat extends until {
    constructor() {
        super();
    }
    /* 时间转时间戳 type为10或13*/
    /**
     * @param {?} para
     * @param {?} type
     * @return {?}
     */
    timeToTimetamp(para, type) {
        if (para == undefined) {
            return "";
        }
        else {
            /** @type {?} */
            const time = new Date(para);
            /** @type {?} */
            const y = time.getFullYear();
            /** @type {?} */
            const m = Number(time.getMonth() + 1) < 10
                ? "0" + (time.getMonth() + 1)
                : time.getMonth() + 1;
            /** @type {?} */
            const d = Number(time.getDate()) < 10 ? "0" + time.getDate() : time.getDate();
            /** @type {?} */
            const h = Number(time.getHours()) < 10 ? "0" + time.getHours() : time.getHours();
            /** @type {?} */
            const M = Number(time.getMinutes()) < 10
                ? "0" + time.getMinutes()
                : time.getMinutes();
            /** @type {?} */
            const S = Number(time.getSeconds()) < 10
                ? "0" + time.getSeconds()
                : time.getSeconds();
            /** @type {?} */
            const resTime = y.toString() +
                "/" +
                m.toString() +
                "/" +
                d.toString() +
                " " +
                h.toString() +
                ":" +
                M.toString() +
                ":" +
                S.toString();
            if (type == 10)
                return (Date.parse(resTime) / 1000).toString();
            else {
                /** @type {?} */
                let myTm = Date.parse(resTime).toString();
                return myTm;
            }
        }
    }
    /* 时间戳转日期 */
    /* type为data是日期  type为time为时间 unit为时间戳位数*/
    /**
     * @param {?} shijianchuo
     * @param {?} type
     * @param {?} unit
     * @return {?}
     */
    format(shijianchuo, type, unit) {
        if (shijianchuo == 0 || shijianchuo == null || shijianchuo == "") {
            return "";
        }
        //shijianchuo是整数，否则要parseInt转换
        if (typeof shijianchuo != "number") {
            shijianchuo = Number(shijianchuo);
        }
        if (unit == 10) {
            /** @type {?} */
            var time = new Date(shijianchuo * 1000);
        }
        else if (unit == 13) {
            /** @type {?} */
            var time = new Date(shijianchuo);
        }
        /** @type {?} */
        var y = time.getFullYear();
        /** @type {?} */
        var m = time.getMonth() + 1;
        /** @type {?} */
        var d = time.getDate();
        /** @type {?} */
        var h = time.getHours();
        /** @type {?} */
        var mm = time.getMinutes();
        /** @type {?} */
        var s = time.getSeconds();
        if (type == "date") {
            return (y +
                "-" +
                super.add0(m) +
                "-" +
                super.add0(d) +
                " " +
                super.add0(h) +
                ":" +
                super.add0(mm) +
                ":" +
                super.add0(s));
        }
        else if (type == "dateNoSecond") {
            return y + "-" + super.add0(m) + "-" + super.add0(d) + " " + super.add0(h) + ":" + super.add0(mm);
        }
        else if (type == "time") {
            return super.add0(h) + ":" + super.add0(mm) + ":" + super.add0(s);
        }
        else if (type == "MonthDay") {
            return super.add0(m) + "月" + super.add0(d) + "日";
        }
        else if (type == "YearMonthDay") {
            return y + "-" + super.add0(m) + "-" + super.add0(d);
        }
        else if (type == "monthDayTime") {
            return super.add0(m) + "-" + super.add0(d) + " " + super.add0(h) + ":" + super.add0(mm);
        }
    }
    /* 计算两个日期之间相差的年数月数天数*/
    /**
     * @param {?} sDate1
     * @param {?} sDate2
     * @return {?}
     */
    getDiffYmdBetweenDate(sDate1, sDate2) {
        /** @type {?} */
        var fixDate = (/**
         * @param {?} sDate
         * @return {?}
         */
        function (sDate) {
            /** @type {?} */
            var aD = sDate.split("-");
            for (var i = 0; i < aD.length; i++) {
                aD[i] = fixZero(parseInt(aD[i]));
            }
            return aD.join("-");
        });
        /** @type {?} */
        var fixZero = (/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return n < 10 ? "0" + n : n;
        });
        /** @type {?} */
        var fixInt = (/**
         * @param {?} a
         * @return {?}
         */
        function (a) {
            for (var i = 0; i < a.length; i++) {
                a[i] = parseInt(a[i]);
            }
            return a;
        });
        /** @type {?} */
        var getMonthDays = (/**
         * @param {?} y
         * @param {?} m
         * @return {?}
         */
        function (y, m) {
            /** @type {?} */
            var aMonthDays = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            if (y % 400 == 0 || (y % 4 == 0 && y % 100 != 0)) {
                aMonthDays[2] = 29;
            }
            return aMonthDays[m];
        });
        /** @type {?} */
        var checkDate = (/**
         * @param {?} sDate
         * @return {?}
         */
        function (sDate) { });
        /** @type {?} */
        var y = 0;
        /** @type {?} */
        var m = 0;
        /** @type {?} */
        var d = 0;
        /** @type {?} */
        var sTmp;
        /** @type {?} */
        var aTmp;
        sDate1 = fixDate(sDate1);
        sDate2 = fixDate(sDate2);
        if (sDate1 > sDate2) {
            sTmp = sDate2;
            sDate2 = sDate1;
            sDate1 = sTmp;
        }
        /** @type {?} */
        var aDate1 = sDate1.split("-");
        aDate1 = fixInt(aDate1);
        /** @type {?} */
        var aDate2 = sDate2.split("-");
        aDate2 = fixInt(aDate2);
        //计算相差的年份
        /*aTmp = [aDate1[0]+1,fixZero(aDate1[1]),fixZero(aDate1[2])];
          while(aTmp.join('-') <= sDate2){
              y++;
              aTmp[0]++;
          }*/
        y = aDate2[0] - aDate1[0];
        if (sDate2.replace(aDate2[0], "") < sDate1.replace(aDate1[0], "")) {
            y = y - 1;
        }
        //计算月份
        aTmp = [aDate1[0] + y, aDate1[1], fixZero(aDate1[2])];
        while (true) {
            if (aTmp[1] == 12) {
                aTmp[0]++;
                aTmp[1] = 1;
            }
            else {
                aTmp[1]++;
            }
            if ([aTmp[0], fixZero(aTmp[1]), aTmp[2]].join("-") <= sDate2) {
                m++;
            }
            else {
                break;
            }
        }
        //计算天数
        aTmp = [aDate1[0] + y, aDate1[1] + m, aDate1[2]];
        if (aTmp[1] > 12) {
            aTmp[0]++;
            aTmp[1] -= 12;
        }
        while (true) {
            if (aTmp[2] == getMonthDays(aTmp[0], aTmp[1])) {
                aTmp[1]++;
                aTmp[2] = 1;
            }
            else {
                aTmp[2]++;
            }
            sTmp = [aTmp[0], fixZero(aTmp[1]), fixZero(aTmp[2])].join("-");
            if (sTmp <= sDate2) {
                d++;
            }
            else {
                break;
            }
        }
        return { y: y, m: m, d: d };
    }
    /* 时间戳转时分 */
    /**
     * @param {?} tmstamp
     * @param {?} type
     * @param {?} unit
     * @return {?}
     */
    timestampToHourMinute(tmstamp, type, unit) {
        //tmstamp是整数，否则要parseInt转换
        if (typeof tmstamp != "number")
            tmstamp = Number(tmstamp);
        if (unit == 10)
            /** @type {?} */
            var time = new Date(tmstamp * 1000);
        else if (unit == 13)
            /** @type {?} */
            var time = new Date(tmstamp);
        /** @type {?} */
        var y = time.getFullYear();
        /** @type {?} */
        var m = time.getMonth() + 1;
        /** @type {?} */
        var d = time.getDate();
        /** @type {?} */
        var h = time.getHours();
        /** @type {?} */
        var mm = time.getMinutes();
        /** @type {?} */
        var s = time.getSeconds();
        if (type == "data")
            return (y +
                "-" +
                super.add0(m) +
                "-" +
                super.add0(d) +
                " " +
                super.add0(h) +
                ":" +
                super.add0(mm) +
                ":" +
                super.add0(s));
        else if (type == "time")
            return super.add0(h) + ":" + super.add0(mm);
    }
    /* 时间戳转时分秒 */
    /**
     * @param {?} tmstamp
     * @param {?} unit
     * @return {?}
     */
    timestampToHourMinuteSecond(tmstamp, unit) {
        //tmstamp是整数，否则要parseInt转换
        if (typeof tmstamp != "number")
            tmstamp = Number(tmstamp);
        if (unit == 10)
            /** @type {?} */
            var time = new Date(tmstamp * 1000);
        else if (unit == 13)
            /** @type {?} */
            var time = new Date(tmstamp);
        /** @type {?} */
        var h = time.getHours();
        /** @type {?} */
        var mm = time.getMinutes();
        /** @type {?} */
        var s = time.getSeconds();
        return super.add0(h) + ":" + super.add0(mm) + ":" + super.add0(s);
    }
    /* 时间戳转月天时分秒 */
    /**
     * @param {?} tmstamp
     * @param {?} unit
     * @return {?}
     */
    timestampToMDHMS(tmstamp, unit) {
        //tmstamp是整数，否则要parseInt转换
        if (typeof tmstamp != "number")
            tmstamp = Number(tmstamp);
        if (unit == 10)
            /** @type {?} */
            var time = new Date(tmstamp * 1000);
        else if (unit == 13)
            /** @type {?} */
            var time = new Date(tmstamp);
        /** @type {?} */
        var m = time.getMonth() + 1;
        /** @type {?} */
        var d = time.getDate();
        /** @type {?} */
        var h = time.getHours();
        /** @type {?} */
        var mm = time.getMinutes();
        /** @type {?} */
        var s = time.getSeconds();
        return (super.add0(m) + "-" + super.add0(d) + " " + super.add0(h) + ":" + super.add0(mm) + ":" + super.add0(s));
    }
    // 获取当前时间的周一零点的时间戳
    /**
     * @param {?} date
     * @return {?}
     */
    getWeekFirstDayDateZeroTime(date) {
        /** @type {?} */
        let nowTemp = new Date(date);
        /** @type {?} */
        let oneDayLong = 24 * 60 * 60 * 1000;
        /** @type {?} */
        let c_time = nowTemp.getTime();
        /** @type {?} */
        let c_day = nowTemp.getDay() || 7;
        /** @type {?} */
        let m_time = c_time - (c_day - 1) * oneDayLong;
        /** @type {?} */
        let result = this.getDateZeroTime(m_time);
        return result;
    }
    // 获取当前时间的月初零点的时间戳
    /**
     * @param {?} date
     * @return {?}
     */
    getMonthFirstDayDateZeroTime(date) {
        /** @type {?} */
        let nowTemp = new Date(date);
        /** @type {?} */
        let oneDayLong = 24 * 60 * 60 * 1000;
        /** @type {?} */
        let c_time = nowTemp.getTime();
        /** @type {?} */
        let c_day = nowTemp.getDate();
        /** @type {?} */
        let m_time = c_time - (c_day - 1) * oneDayLong;
        /** @type {?} */
        let result = this.getDateZeroTime(m_time);
        return result;
    }
    // 获取当前时间的当天零点的时间戳
    /**
     * @param {?} date
     * @return {?}
     */
    getDateZeroTime(date) {
        if (typeof date == "undefined") {
            throw new Error("date is undefined!");
        }
        if (typeof date == "number") {
            return new Date(new Date(date).toLocaleDateString()).getTime();
        }
        if (typeof date == "object") {
            return new Date(date.toLocaleDateString()).getTime();
        }
    }
    // 判断时间戳是否是今天  str为13位时间戳
    /**
     * @param {?} str
     * @return {?}
     */
    isToday(str) {
        if (new Date(str).toDateString() === new Date().toDateString()) {
            //今天
            return true;
        }
        else if (new Date(str) < new Date()) {
            //之前
            return false;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL20tdWktbGliL3V0aWwvIiwic291cmNlcyI6WyJkYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsTUFBTSxLQUFLOzs7OztJQUNQLElBQUksQ0FBQyxDQUFDO1FBQ0YsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEMsQ0FBQztDQUNKO0FBQ0QsTUFBTSxPQUFPLFVBQVcsU0FBUSxLQUFLO0lBQ2pDO1FBQ0ksS0FBSyxFQUFFLENBQUM7SUFDWixDQUFDOzs7Ozs7O0lBRUQsY0FBYyxDQUFDLElBQUksRUFBRSxJQUFJO1FBQ3JCLElBQUksSUFBSSxJQUFJLFNBQVMsRUFBRTtZQUNuQixPQUFPLEVBQUUsQ0FBQztTQUNiO2FBQU07O2tCQUNHLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7O2tCQUNyQixDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRTs7a0JBQ3RCLENBQUMsR0FDSCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUU7Z0JBQzVCLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUM3QixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUM7O2tCQUN2QixDQUFDLEdBQ0gsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTs7a0JBQ2pFLENBQUMsR0FDSCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FB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QUVELElBQUksT0FBTyxJQUFJLElBQUksUUFBUSxFQUFFO1lBQ3pCLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUN4RDtJQUNMLENBQUM7Ozs7OztJQUVELE9BQU8sQ0FBQyxHQUFHO1FBQ1AsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxZQUFZLEVBQUUsS0FBSyxJQUFJLElBQUksRUFBRSxDQUFDLFlBQVksRUFBRSxFQUFFO1lBQzVELElBQUk7WUFDSixPQUFPLElBQUksQ0FBQztTQUNmO2FBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLElBQUksRUFBRSxFQUFFO1lBQ25DLElBQUk7WUFDSixPQUFPLEtBQUssQ0FBQztTQUNoQjtJQUNMLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIHVudGlsIHtcclxuICAgIGFkZDAobSkge1xyXG4gICAgICAgIHJldHVybiBtIDwgMTAgPyBcIjBcIiArIG0gOiBtO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBjbGFzcyBkYXRlRm9ybWF0IGV4dGVuZHMgdW50aWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuICAgIC8qIOaXtumXtOi9rOaXtumXtOaIsyB0eXBl5Li6MTDmiJYxMyovXHJcbiAgICB0aW1lVG9UaW1ldGFtcChwYXJhLCB0eXBlKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAocGFyYSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZSA9IG5ldyBEYXRlKHBhcmEpO1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gdGltZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtID1cclxuICAgICAgICAgICAgICAgIE51bWJlcih0aW1lLmdldE1vbnRoKCkgKyAxKSA8IDEwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcIjBcIiArICh0aW1lLmdldE1vbnRoKCkgKyAxKVxyXG4gICAgICAgICAgICAgICAgICAgIDogdGltZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgY29uc3QgZCA9XHJcbiAgICAgICAgICAgICAgICBOdW1iZXIodGltZS5nZXREYXRlKCkpIDwgMTAgPyBcIjBcIiArIHRpbWUuZ2V0RGF0ZSgpIDogdGltZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGggPVxyXG4gICAgICAgICAgICAgICAgTnVtYmVyKHRpbWUuZ2V0SG91cnMoKSkgPCAxMCA/IFwiMFwiICsgdGltZS5nZXRIb3VycygpIDogdGltZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBjb25zdCBNID1cclxuICAgICAgICAgICAgICAgIE51bWJlcih0aW1lLmdldE1pbnV0ZXMoKSkgPCAxMFxyXG4gICAgICAgICAgICAgICAgICAgID8gXCIwXCIgKyB0aW1lLmdldE1pbnV0ZXMoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogdGltZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IFMgPVxyXG4gICAgICAgICAgICAgICAgTnVtYmVyKHRpbWUuZ2V0U2Vjb25kcygpKSA8IDEwXHJcbiAgICAgICAgICAgICAgICAgICAgPyBcIjBcIiArIHRpbWUuZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0aW1lLmdldFNlY29uZHMoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzVGltZSA9XHJcbiAgICAgICAgICAgICAgICB5LnRvU3RyaW5nKCkgK1xyXG4gICAgICAgICAgICAgICAgXCIvXCIgK1xyXG4gICAgICAgICAgICAgICAgbS50b1N0cmluZygpICtcclxuICAgICAgICAgICAgICAgIFwiL1wiICtcclxuICAgICAgICAgICAgICAgIGQudG9TdHJpbmcoKSArXHJcbiAgICAgICAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICBoLnRvU3RyaW5nKCkgK1xyXG4gICAgICAgICAgICAgICAgXCI6XCIgK1xyXG4gICAgICAgICAgICAgICAgTS50b1N0cmluZygpICtcclxuICAgICAgICAgICAgICAgIFwiOlwiICtcclxuICAgICAgICAgICAgICAgIFMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gMTApIHJldHVybiAoRGF0ZS5wYXJzZShyZXNUaW1lKSAvIDEwMDApLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IG15VG0gPSBEYXRlLnBhcnNlKHJlc1RpbWUpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbXlUbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiDml7bpl7TmiLPovazml6XmnJ8gKi9cclxuICAgIC8qIHR5cGXkuLpkYXRh5piv5pel5pyfICB0eXBl5Li6dGltZeS4uuaXtumXtCB1bml05Li65pe26Ze05oiz5L2N5pWwKi9cclxuICAgIGZvcm1hdChzaGlqaWFuY2h1bywgdHlwZSwgdW5pdCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHNoaWppYW5jaHVvID09IDAgfHwgc2hpamlhbmNodW8gPT0gbnVsbCB8fCBzaGlqaWFuY2h1byA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3NoaWppYW5jaHVv5piv5pW05pWw77yM5ZCm5YiZ6KaBcGFyc2VJbnTovazmjaJcclxuICAgICAgICBpZiAodHlwZW9mIHNoaWppYW5jaHVvICE9IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgc2hpamlhbmNodW8gPSBOdW1iZXIoc2hpamlhbmNodW8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodW5pdCA9PSAxMCkge1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IG5ldyBEYXRlKHNoaWppYW5jaHVvICogMTAwMCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh1bml0ID09IDEzKSB7XHJcbiAgICAgICAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoc2hpamlhbmNodW8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgeSA9IHRpbWUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB2YXIgbSA9IHRpbWUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgdmFyIGQgPSB0aW1lLmdldERhdGUoKTtcclxuICAgICAgICB2YXIgaCA9IHRpbWUuZ2V0SG91cnMoKTtcclxuICAgICAgICB2YXIgbW0gPSB0aW1lLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICB2YXIgcyA9IHRpbWUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIGlmICh0eXBlID09IFwiZGF0ZVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICB5ICtcclxuICAgICAgICAgICAgICAgIFwiLVwiICtcclxuICAgICAgICAgICAgICAgIHN1cGVyLmFkZDAobSkgK1xyXG4gICAgICAgICAgICAgICAgXCItXCIgK1xyXG4gICAgICAgICAgICAgICAgc3VwZXIuYWRkMChkKSArXHJcbiAgICAgICAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICBzdXBlci5hZGQwKGgpICtcclxuICAgICAgICAgICAgICAgIFwiOlwiICtcclxuICAgICAgICAgICAgICAgIHN1cGVyLmFkZDAobW0pICtcclxuICAgICAgICAgICAgICAgIFwiOlwiICtcclxuICAgICAgICAgICAgICAgIHN1cGVyLmFkZDAocylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJkYXRlTm9TZWNvbmRcIikge1xyXG4gICAgICAgICAgICByZXR1cm4geSArIFwiLVwiICsgc3VwZXIuYWRkMChtKSArIFwiLVwiICsgc3VwZXIuYWRkMChkKSArIFwiIFwiICsgc3VwZXIuYWRkMChoKSArIFwiOlwiICsgc3VwZXIuYWRkMChtbSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IFwidGltZVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5hZGQwKGgpICsgXCI6XCIgKyBzdXBlci5hZGQwKG1tKSArIFwiOlwiICsgc3VwZXIuYWRkMChzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJNb250aERheVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5hZGQwKG0pICsgXCLmnIhcIiArIHN1cGVyLmFkZDAoZCkgKyBcIuaXpVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcIlllYXJNb250aERheVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB5ICsgXCItXCIgKyBzdXBlci5hZGQwKG0pICsgXCItXCIgKyBzdXBlci5hZGQwKGQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcIm1vbnRoRGF5VGltZVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5hZGQwKG0pICsgXCItXCIgKyBzdXBlci5hZGQwKGQpICsgXCIgXCIgKyBzdXBlci5hZGQwKGgpICsgXCI6XCIgKyBzdXBlci5hZGQwKG1tKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiDorqHnrpfkuKTkuKrml6XmnJ/kuYvpl7Tnm7jlt67nmoTlubTmlbDmnIjmlbDlpKnmlbAqL1xyXG4gICAgZ2V0RGlmZlltZEJldHdlZW5EYXRlKHNEYXRlMSwgc0RhdGUyKSB7XHJcbiAgICAgICAgdmFyIGZpeERhdGUgPSBmdW5jdGlvbiAoc0RhdGUpIHtcclxuICAgICAgICAgICAgdmFyIGFEID0gc0RhdGUuc3BsaXQoXCItXCIpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFELmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBhRFtpXSA9IGZpeFplcm8ocGFyc2VJbnQoYURbaV0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYUQuam9pbihcIi1cIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgZml4WmVybyA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuIDwgMTAgPyBcIjBcIiArIG4gOiBuO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGZpeEludCA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgYVtpXSA9IHBhcnNlSW50KGFbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGdldE1vbnRoRGF5cyA9IGZ1bmN0aW9uICh5LCBtKSB7XHJcbiAgICAgICAgICAgIHZhciBhTW9udGhEYXlzID0gWzAsIDMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xyXG4gICAgICAgICAgICBpZiAoeSAlIDQwMCA9PSAwIHx8ICh5ICUgNCA9PSAwICYmIHkgJSAxMDAgIT0gMCkpIHtcclxuICAgICAgICAgICAgICAgIGFNb250aERheXNbMl0gPSAyOTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYU1vbnRoRGF5c1ttXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjaGVja0RhdGUgPSBmdW5jdGlvbiAoc0RhdGUpIHsgfTtcclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgdmFyIG0gPSAwO1xyXG4gICAgICAgIHZhciBkID0gMDtcclxuICAgICAgICB2YXIgc1RtcDtcclxuICAgICAgICB2YXIgYVRtcDtcclxuICAgICAgICBzRGF0ZTEgPSBmaXhEYXRlKHNEYXRlMSk7XHJcbiAgICAgICAgc0RhdGUyID0gZml4RGF0ZShzRGF0ZTIpO1xyXG4gICAgICAgIGlmIChzRGF0ZTEgPiBzRGF0ZTIpIHtcclxuICAgICAgICAgICAgc1RtcCA9IHNEYXRlMjtcclxuICAgICAgICAgICAgc0RhdGUyID0gc0RhdGUxO1xyXG4gICAgICAgICAgICBzRGF0ZTEgPSBzVG1wO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYURhdGUxID0gc0RhdGUxLnNwbGl0KFwiLVwiKTtcclxuICAgICAgICBhRGF0ZTEgPSBmaXhJbnQoYURhdGUxKTtcclxuICAgICAgICB2YXIgYURhdGUyID0gc0RhdGUyLnNwbGl0KFwiLVwiKTtcclxuICAgICAgICBhRGF0ZTIgPSBmaXhJbnQoYURhdGUyKTtcclxuICAgICAgICAvL+iuoeeul+ebuOW3rueahOW5tOS7vVxyXG4gICAgICAgIC8qYVRtcCA9IFthRGF0ZTFbMF0rMSxmaXhaZXJvKGFEYXRlMVsxXSksZml4WmVybyhhRGF0ZTFbMl0pXTtcclxuICAgICAgICAgIHdoaWxlKGFUbXAuam9pbignLScpIDw9IHNEYXRlMil7XHJcbiAgICAgICAgICAgICAgeSsrO1xyXG4gICAgICAgICAgICAgIGFUbXBbMF0rKztcclxuICAgICAgICAgIH0qL1xyXG4gICAgICAgIHkgPSBhRGF0ZTJbMF0gLSBhRGF0ZTFbMF07XHJcbiAgICAgICAgaWYgKHNEYXRlMi5yZXBsYWNlKGFEYXRlMlswXSwgXCJcIikgPCBzRGF0ZTEucmVwbGFjZShhRGF0ZTFbMF0sIFwiXCIpKSB7XHJcbiAgICAgICAgICAgIHkgPSB5IC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/orqHnrpfmnIjku71cclxuICAgICAgICBhVG1wID0gW2FEYXRlMVswXSArIHksIGFEYXRlMVsxXSwgZml4WmVybyhhRGF0ZTFbMl0pXTtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoYVRtcFsxXSA9PSAxMikge1xyXG4gICAgICAgICAgICAgICAgYVRtcFswXSsrO1xyXG4gICAgICAgICAgICAgICAgYVRtcFsxXSA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhVG1wWzFdKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFthVG1wWzBdLCBmaXhaZXJvKGFUbXBbMV0pLCBhVG1wWzJdXS5qb2luKFwiLVwiKSA8PSBzRGF0ZTIpIHtcclxuICAgICAgICAgICAgICAgIG0rKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6K6h566X5aSp5pWwXHJcbiAgICAgICAgYVRtcCA9IFthRGF0ZTFbMF0gKyB5LCBhRGF0ZTFbMV0gKyBtLCBhRGF0ZTFbMl1dO1xyXG4gICAgICAgIGlmIChhVG1wWzFdID4gMTIpIHtcclxuICAgICAgICAgICAgYVRtcFswXSsrO1xyXG4gICAgICAgICAgICBhVG1wWzFdIC09IDEyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoYVRtcFsyXSA9PSBnZXRNb250aERheXMoYVRtcFswXSwgYVRtcFsxXSkpIHtcclxuICAgICAgICAgICAgICAgIGFUbXBbMV0rKztcclxuICAgICAgICAgICAgICAgIGFUbXBbMl0gPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYVRtcFsyXSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNUbXAgPSBbYVRtcFswXSwgZml4WmVybyhhVG1wWzFdKSwgZml4WmVybyhhVG1wWzJdKV0uam9pbihcIi1cIik7XHJcbiAgICAgICAgICAgIGlmIChzVG1wIDw9IHNEYXRlMikge1xyXG4gICAgICAgICAgICAgICAgZCsrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgeTogeSwgbTogbSwgZDogZCB9O1xyXG4gICAgfVxyXG4gICAgLyog5pe26Ze05oiz6L2s5pe25YiGICovXHJcbiAgICB0aW1lc3RhbXBUb0hvdXJNaW51dGUodG1zdGFtcCwgdHlwZSwgdW5pdCk6IHN0cmluZyB7XHJcbiAgICAgICAgLy90bXN0YW1w5piv5pW05pWw77yM5ZCm5YiZ6KaBcGFyc2VJbnTovazmjaJcclxuICAgICAgICBpZiAodHlwZW9mIHRtc3RhbXAgIT0gXCJudW1iZXJcIikgdG1zdGFtcCA9IE51bWJlcih0bXN0YW1wKTtcclxuICAgICAgICBpZiAodW5pdCA9PSAxMCkgdmFyIHRpbWUgPSBuZXcgRGF0ZSh0bXN0YW1wICogMTAwMCk7XHJcbiAgICAgICAgZWxzZSBpZiAodW5pdCA9PSAxMykgdmFyIHRpbWUgPSBuZXcgRGF0ZSh0bXN0YW1wKTtcclxuICAgICAgICB2YXIgeSA9IHRpbWUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB2YXIgbSA9IHRpbWUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgdmFyIGQgPSB0aW1lLmdldERhdGUoKTtcclxuICAgICAgICB2YXIgaCA9IHRpbWUuZ2V0SG91cnMoKTtcclxuICAgICAgICB2YXIgbW0gPSB0aW1lLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICB2YXIgcyA9IHRpbWUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIGlmICh0eXBlID09IFwiZGF0YVwiKVxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgeSArXHJcbiAgICAgICAgICAgICAgICBcIi1cIiArXHJcbiAgICAgICAgICAgICAgICBzdXBlci5hZGQwKG0pICtcclxuICAgICAgICAgICAgICAgIFwiLVwiICtcclxuICAgICAgICAgICAgICAgIHN1cGVyLmFkZDAoZCkgK1xyXG4gICAgICAgICAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgc3VwZXIuYWRkMChoKSArXHJcbiAgICAgICAgICAgICAgICBcIjpcIiArXHJcbiAgICAgICAgICAgICAgICBzdXBlci5hZGQwKG1tKSArXHJcbiAgICAgICAgICAgICAgICBcIjpcIiArXHJcbiAgICAgICAgICAgICAgICBzdXBlci5hZGQwKHMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBcInRpbWVcIikgcmV0dXJuIHN1cGVyLmFkZDAoaCkgKyBcIjpcIiArIHN1cGVyLmFkZDAobW0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOaXtumXtOaIs+i9rOaXtuWIhuenkiAqL1xyXG4gICAgdGltZXN0YW1wVG9Ib3VyTWludXRlU2Vjb25kKHRtc3RhbXAsIHVuaXQpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vdG1zdGFtcOaYr+aVtOaVsO+8jOWQpuWImeimgXBhcnNlSW506L2s5o2iXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0bXN0YW1wICE9IFwibnVtYmVyXCIpIHRtc3RhbXAgPSBOdW1iZXIodG1zdGFtcCk7XHJcbiAgICAgICAgaWYgKHVuaXQgPT0gMTApIHZhciB0aW1lID0gbmV3IERhdGUodG1zdGFtcCAqIDEwMDApO1xyXG4gICAgICAgIGVsc2UgaWYgKHVuaXQgPT0gMTMpIHZhciB0aW1lID0gbmV3IERhdGUodG1zdGFtcCk7XHJcbiAgICAgICAgdmFyIGggPSB0aW1lLmdldEhvdXJzKCk7XHJcbiAgICAgICAgdmFyIG1tID0gdGltZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgdmFyIHMgPSB0aW1lLmdldFNlY29uZHMoKTtcclxuICAgICAgICByZXR1cm4gc3VwZXIuYWRkMChoKSArIFwiOlwiICsgc3VwZXIuYWRkMChtbSkgKyBcIjpcIiArIHN1cGVyLmFkZDAocyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyog5pe26Ze05oiz6L2s5pyI5aSp5pe25YiG56eSICovXHJcbiAgICB0aW1lc3RhbXBUb01ESE1TKHRtc3RhbXAsIHVuaXQpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vdG1zdGFtcOaYr+aVtOaVsO+8jOWQpuWImeimgXBhcnNlSW506L2s5o2iXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0bXN0YW1wICE9IFwibnVtYmVyXCIpIHRtc3RhbXAgPSBOdW1iZXIodG1zdGFtcCk7XHJcbiAgICAgICAgaWYgKHVuaXQgPT0gMTApIHZhciB0aW1lID0gbmV3IERhdGUodG1zdGFtcCAqIDEwMDApO1xyXG4gICAgICAgIGVsc2UgaWYgKHVuaXQgPT0gMTMpIHZhciB0aW1lID0gbmV3IERhdGUodG1zdGFtcCk7XHJcbiAgICAgICAgdmFyIG0gPSB0aW1lLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIHZhciBkID0gdGltZS5nZXREYXRlKCk7XHJcbiAgICAgICAgdmFyIGggPSB0aW1lLmdldEhvdXJzKCk7XHJcbiAgICAgICAgdmFyIG1tID0gdGltZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgdmFyIHMgPSB0aW1lLmdldFNlY29uZHMoKTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzdXBlci5hZGQwKG0pICsgXCItXCIgKyBzdXBlci5hZGQwKGQpICsgXCIgXCIgKyBzdXBlci5hZGQwKGgpICsgXCI6XCIgKyBzdXBlci5hZGQwKG1tKSArIFwiOlwiICsgc3VwZXIuYWRkMChzKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICAvLyDojrflj5blvZPliY3ml7bpl7TnmoTlkajkuIDpm7bngrnnmoTml7bpl7TmiLNcclxuICAgIGdldFdlZWtGaXJzdERheURhdGVaZXJvVGltZShkYXRlKTogYW55IHtcclxuICAgICAgICBsZXQgbm93VGVtcCA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgIGxldCBvbmVEYXlMb25nID0gMjQgKiA2MCAqIDYwICogMTAwMDtcclxuICAgICAgICBsZXQgY190aW1lID0gbm93VGVtcC5nZXRUaW1lKCk7XHJcbiAgICAgICAgbGV0IGNfZGF5ID0gbm93VGVtcC5nZXREYXkoKSB8fCA3O1xyXG4gICAgICAgIGxldCBtX3RpbWUgPSBjX3RpbWUgLSAoY19kYXkgLSAxKSAqIG9uZURheUxvbmc7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuZ2V0RGF0ZVplcm9UaW1lKG1fdGltZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5blvZPliY3ml7bpl7TnmoTmnIjliJ3pm7bngrnnmoTml7bpl7TmiLNcclxuICAgIGdldE1vbnRoRmlyc3REYXlEYXRlWmVyb1RpbWUoZGF0ZSk6IGFueSB7XHJcbiAgICAgICAgbGV0IG5vd1RlbXAgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgICAgICBsZXQgb25lRGF5TG9uZyA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAgICAgbGV0IGNfdGltZSA9IG5vd1RlbXAuZ2V0VGltZSgpO1xyXG4gICAgICAgIGxldCBjX2RheSA9IG5vd1RlbXAuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGxldCBtX3RpbWUgPSBjX3RpbWUgLSAoY19kYXkgLSAxKSAqIG9uZURheUxvbmc7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuZ2V0RGF0ZVplcm9UaW1lKG1fdGltZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtOeahOW9k+WkqembtueCueeahOaXtumXtOaIs1xyXG4gICAgZ2V0RGF0ZVplcm9UaW1lKGRhdGUpOiBhbnkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImRhdGUgaXMgdW5kZWZpbmVkIVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShuZXcgRGF0ZShkYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRlID09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkpLmdldFRpbWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDliKTmlq3ml7bpl7TmiLPmmK/lkKbmmK/ku4rlpKkgIHN0cuS4ujEz5L2N5pe26Ze05oizXHJcbiAgICBpc1RvZGF5KHN0cik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChuZXcgRGF0ZShzdHIpLnRvRGF0ZVN0cmluZygpID09PSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpKSB7XHJcbiAgICAgICAgICAgIC8v5LuK5aSpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobmV3IERhdGUoc3RyKSA8IG5ldyBEYXRlKCkpIHtcclxuICAgICAgICAgICAgLy/kuYvliY1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==