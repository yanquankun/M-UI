{"version":3,"file":"m-ui-lib-tag.js.map","sources":["ng://m-ui-lib/tag/tag.component.ts","ng://m-ui-lib/tag/tag.module.ts"],"sourcesContent":["import { Component, Input, OnInit, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { dateFormat } from 'm-ui-lib/util';\n@Component({\n  selector: 'm-ui-tag',\n  templateUrl: './tag.component.html',\n  styleUrls: ['./tag.component.less']\n})\nexport class TagComponent implements OnInit {\n  // 是否启动自定义颜色\n  @Input() tagBgc: string = \"\";\n  // 是否可关闭\n  @Input() closeable: boolean = false;\n  // 是否打开点击tag标签开启庆祝效果\n  @Input() celebrate: boolean = false;\n  // 关闭事件\n  @Output() closeEvent: EventEmitter<{ val: string }> = new EventEmitter<{ val: string }>();\n  @ViewChild(\"content\") content: ElementRef<any>;\n  @ViewChild(\"tag\") tag: ElementRef<any>;\n  hideTag: boolean = false;\n  beforeBgc = \"#fafafa\";\n\n  constructor() { }\n\n  tagClick(e) {\n    const tag = this.tag.nativeElement;\n    if (this.celebrate) {\n      const particles = [];\n      const color = this.randomColor();\n\n      const particle = document.createElement('span');\n      particle.classList.add('particle', 'move');\n\n      // const { x, y } = this.randomLocation();\n      const { x, y } = { x: 50 + \"px\", y: -(e['clientY'] - 50) + \"px\" };\n      particle.style.setProperty('--x', x);\n      particle.style.setProperty('--y', y);\n      particle.style.background = color;\n\n      tag.appendChild(particle);\n\n      particles.push(particle);\n\n      setTimeout(() => {\n        for (let i = 0; i < 100; i++) {\n          const innerP = document.createElement('span');\n          innerP.classList.add('particle', 'move');\n          innerP.style.transform = `translate(${x}, ${y})`;\n\n          const xs = Math.random() * 200 - 100 + 'px';\n          const ys = Math.random() * 200 - 100 + 'px';\n          innerP.style.setProperty('--x', `calc(${x} + ${xs})`);\n          innerP.style.setProperty('--y', `calc(${y} + ${ys})`);\n          innerP.style.animationDuration = Math.random() * 300 + 200 + 'ms';\n          innerP.style.background = color;\n\n          tag.appendChild(innerP);\n          particles.push(innerP)\n        }\n\n        setTimeout(() => {\n          particles.forEach(particle => {\n            particle.remove();\n          })\n        }, 1000)\n      }, 1000);\n    }\n  }\n\n  randomLocation() {\n    return {\n      x: Math.random() * window.innerWidth - window.innerWidth / 2 + 'px',\n      y: Math.random() * window.innerHeight - window.innerHeight / 2 + 'px',\n    }\n  }\n\n  randomColor() {\n    return `hsl(${Math.floor(Math.random() * 361)}, 100%, 50%)`;\n  }\n\n  close() {\n    this.hideTag = true;\n    const val = this.content.nativeElement.outerText;\n    const output = {\n      val: val,\n    }\n    this.closeEvent.emit(output);\n  }\n\n  ngOnInit() {\n    const d = new dateFormat;\n    console.log(d.format(new Date().getTime(), \"date\", 13))\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TagComponent } from './tag.component';\n@NgModule({\n  declarations: [TagComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [TagComponent]\n})\nexport class TagModule { }\n"],"names":[],"mappings":"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"}
